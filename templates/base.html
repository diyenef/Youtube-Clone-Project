<!doctype html>
{% load static %}
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}YouTube Clone{% endblock %}</title>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
  </head>
  <body>
    <div class="app">
      <header class="topbar">
        <div class="top-left">
          <button class="menu-btn" aria-label="Toggle menu">
            <img src="{% static 'icons/menu.svg' %}" class="icon-img" alt="menu" width="20" height="20" />
          </button>
          <a class="brand" href="/" title="Home">
            <!-- play icon inside red rounded square -->
            <svg class="brand-icon" viewBox="0 0 24 24" width="36" height="36" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><rect width="24" height="24" rx="4" fill="#ff0000"/><path d="M9 8v8l6-4z" fill="#fff"/></svg>
            <span class="brand-text">YouTube <span class="brand-badge">TR</span></span>
          </a>
        </div>

        <div class="search">
          <form method="get" action="{% url 'search' %}" class="search-form">
            <input name="q" placeholder="Search" value="{% if request.GET.q %}{{ request.GET.q }}{% endif %}" autocomplete="off" />
            <button type="submit" class="search-btn" aria-label="Search">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><circle cx="11" cy="11" r="6" stroke="currentColor" stroke-width="2"/></svg>
            </button>
            <button class="mic-btn" type="button" aria-label="Voice search">
              <img src="{% static 'icons/mic.svg' %}" class="icon-img" alt="mic" width="18" height="18" />
            </button>
          </form>
        </div>

        <div class="actions">
          {% if user.is_authenticated %}
            <a href="{% url 'upload' %}" class="icon-btn" title="Upload">
              <img src="{% static 'icons/upload.svg' %}" class="icon-img" alt="upload" width="18" height="18" />
            </a>
            <a href="/admin/" class="icon-btn" title="Admin">⚙</a>
            <a href="{% url 'logout' %}" class="avatar">{{ user.username|slice:":1"|upper }}</a>
          {% else %}
            <a href="{% url 'login' %}" class="btn">Sign in</a>
          {% endif %}
        </div>
      </header>

      <div class="chips-row" role="navigation" aria-label="topic filters">
        <div class="chips-inner">
          <button class="filters-btn" aria-label="Filters">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 6h16" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/><path d="M7 12h10" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/><path d="M10 18h4" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
            <span>Filtreler</span>
          </button>

          <ul class="chips">
            <li class="chip active">Tümü</li>
            <li class="chip">Müzik</li>
            <li class="chip">Oyun</li>
            <li class="chip">Mix'ler</li>
            <li class="chip">Hip hop</li>
            <li class="chip">Rap yapma</li>
            <li class="chip">Animasyon</li>
            <li class="chip">Futbol</li>
            <li class="chip">Son yüklenenler</li>
            <li class="chip">İzlenenler</li>
            <li class="chip">Yeni öneriler</li>
          </ul>
        </div>
      </div>

      <div class="layout">
        <aside class="sidebar">
          <nav class="main-nav">
            <ul class="main-list">
              <li class="active"><img src="{% static 'icons/home.svg' %}" class="icon-img" alt="home" width="18" height="18"/> <span>Ana Sayfa</span></li>
              <li><img src="{% static 'icons/shorts.svg' %}" class="icon-img" alt="shorts" width="18" height="18"/> <span>Shorts</span></li>
              <li><img src="{% static 'icons/subs.svg' %}" class="icon-img" alt="subscriptions" width="18" height="18"/> <span>Abonelikler</span></li>
              <li><img src="{% static 'icons/library.svg' %}" class="icon-img" alt="library" width="18" height="18"/> <span>Kitaplık</span></li>
            </ul>
          </nav>

          <hr class="sidebar-sep" />

          <div class="subs">
            <h4 class="subs-title">Abonelikler</h4>
            <ul class="subs-list">
              {% for ch in sidebar_subscriptions %}
                <li>
                  <a class="sub-link" href="{% url 'channel_profile' ch.user.username %}">
                    {% if ch.avatar %}
                      <img src="{{ ch.avatar.url }}" class="sub-avatar" alt="{{ ch.display_name|default:ch.user.username }}" />
                    {% else %}
                      <span class="sub-avatar sub-initials">{{ ch.display_name|default:ch.user.username|slice:":1"|upper }}</span>
                    {% endif %}
                    <span class="sub-name">{{ ch.display_name|default:ch.user.username }}</span>
                    <!-- optional status dot (blue) for recent uploads -->
                    <span class="sub-dot" aria-hidden="true"></span>
                  </a>
                </li>
              {% empty %}
                <li class="muted">Henüz abonelik yok</li>
              {% endfor %}
              <li class="show-more">Daha fazla göster</li>
            </ul>
          </div>
        </aside>

        <main class="content">
          {% block content %}{% endblock %}
        </main>
      </div>
    </div>
    <script>
      window.USERNAME = "{% if user.is_authenticated %}{{ user.username|escapejs }}{% else %}{% endif %}";
    </script>
    <script src="{% static 'js/main.js' %}"></script>
  </body>
</html>
